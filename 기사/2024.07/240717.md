### 파이썬 생태계와 깃허브 보안
###### 보안뉴스 Column by 문정후 기자 (https://www.boannews.com/media/view.asp?idx=131385)
---   
<br>

#### 파이썬 생태계
파이썬은 언어 그 자체이며 PyPI는 파이썬으로 만들어진 각종 패키지와 오픈소스들이   
공유되는 곳이라 개발자들이 생활하는 커뮤니티이다   
또 파이썬소프트웨어재단은 파이썬 언어를 관리하고 유지하는 곳이다   
파이썬 생태계에서 가장 중요한 알파와 오메가인 것이다   
이 세 가지 요소들도 깃허브에 repository를 보유하고 있다   
깃허브에는 소스코드도 포함되어 있고 주요 관리자들만 접근할 수 있도록 설정되어 있다   
즉, 관리자 권한의 크리덴셜이나 토큰이 있다면 주요 소스코드를  
가져가거나 변경, 삭제할 수 있다는 뜻이 된다   
그렇기에 깃허브 관리는 어느 조직에 있어서나 중요한 관리 대상이 된다   
<br>

#### 접근 토큰의 발견
보안 업체 JFrog는 얼마 전 깃허브 repository 접근 토큰을 발견했다   
접근 토큰이 Docker Hub의 도커 이미지 공공 컨테이너 하나에 공개된 채 있었다고 한다   
누구라도 이 컨테이너를 발견했고 악의적인 성향이 있었다면   
각종 PyPI 패키지들에 악성코드를 주입하거나   
파이썬 언어 자체를 조작해 놓을 수 있었다   
파이썬 생태계가 하루아침에 망가질 수도 있었다는 말이다   
하지만 공격자는 장기적으로 이를 활용하려고 했을 수도 있다   
아무도 모르게 PyPI 패키지를 조작한다거나 조심스럽게 진행 중일수도 있다   
정확한 피해 규모를 예상조차 할 수 없다는 것이다   
<br>

#### 정확히 무슨 상황인가
JFrog는 자신들이 찾아낸 것을 '클래식 깃허브 토큰'이라고 표현한다   
'클래식 토큰'은 repository에 대한 접근 권한을 뭉뚱그려 준다   
한 개발자가 모든 프로젝트에서 관리자는 아니기 때문에 같은 계정이더라도   
repository에 따라 권한이 제각각 달라져야 한다   
최신 토큰에는 권한 설정이 세분화 되어 있는 반면 예전 토큰은 그렇지 않다   
발견한 문제의 Docker 컨테이너는 한 깃허브 계정과 연결되어 있었고   
그 계정은 파이썬의 핵심 인프라와 repository에 관리자 권한으로 접근할 수 있었다   
토큰은 컴파일 된 파이썬 파일 형태로 저장되어 있었다   
하지만 컴파일링이 되기 전의 소스코드에는 토큰이 없었다   
소스코드에 잠깐 접근 토큰을 첨부해 사용하다가 토큰과 같이 컴파일링을 한 것 같다   
그 상태에서 Docker 이미지 내에 소스코드와 바이너리를 넣어 공개한 상황이다   
<br>

#### 항상 주의해야 한다
보안 검사를 할 때는 소스코드와 바이너리 데이터를 전부 점검해야 한다고 강조한다   
바이너리 파일에서 검색해 찾는 것이 쉽지는 않다   
이번 경우처럼 소스코드 뿐만 아니라 바이너리 파일에만 민감한 정보가 있을 수 있으니   
이번 사건이 최초도, 마지막 사건도 아닐 수 있다   
<br>

#### 어떻게 사용해야 안전한지
JFrog는 몇 가지 실천 사항을 강조했다   
소스코드 스캔만으로는 비밀을 온전히 지켜낼 수 없다   
현재의 개발 도구는 각종 비밀을 잘 찾아낸다   
또한 소스코드에서 뭔가를 찾아낸다고 해서 유출이 전부 차단되는 것도 아니다   
그 점을 기억하고 바이너리까지도 꼼꼼하게 점검할 수 있어야 한다   
또한 예전의 깃허브 토큰들을 새 것으로 교체하는 게 안전할 수도 있다   
마지막으로 토큰의 권한 설정을 세밀하게 하는 게 안전하다   
최신 버전의 토큰으로 변경하더라도 안전하게 사용하지 않으면 소용이 없다   
새 토큰들의 권한 세분화 기능을 최대한 이용해야 한다   
<br>
